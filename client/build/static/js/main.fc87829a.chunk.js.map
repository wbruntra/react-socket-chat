{"version":3,"sources":["components/Main.js","actions/index.js","components/App.js","reducers/socket.js","reducers/index.js","reducers/statusReducer.js","reducers/healthReducer.js","store.js","index.js"],"names":["Main","state","handle","enteredName","msg","sendForm","e","preventDefault","_this$state","_this","props","sendMessage","setState","acceptName","this","checkHealth","_this2","_this$state2","react_default","a","createElement","className","onSubmit","placeholder","value","onChange","target","messages","map","data","i","key","type","hidden","Component","connect","status","health","socket","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee","dispatch","serverResponse","wrap","_context","prev","next","axios","get","sent","payload","stop","_x","apply","arguments","App","react_router_dom","react_router","path","component","initialState","reducers","length","undefined","action","update","$push","socketUrl","process","REACT_APP_SOCKET_URL","io","socketIoMiddleware","createSocketIoMiddleware","store","createStore","combineReducers","objectSpread","composeWithDevTools","applyMiddleware","reduxThunk","subscribe","console","log","getState","ReactDOM","render","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.fc87829a.chunk.js","sourcesContent":["import React, { Component, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { checkHealth, sendMessage } from '../actions';\n\nclass Main extends Component {\n  state = {\n    handle: '',\n    enteredName: '',\n    msg: '',\n  };\n\n  componentDidMount() {\n    this.props.checkHealth();\n  }\n\n  sendForm = e => {\n    e.preventDefault();\n    const { handle, msg } = this.state;\n\n    this.props.sendMessage(handle, msg);\n    this.setState({\n      msg: '',\n    });\n  };\n\n  acceptName = () => {\n    this.setState({\n      handle: this.state.enteredName,\n    });\n  };\n\n  render() {\n    const { enteredName, handle, msg } = this.state;\n\n    if (handle === '') {\n      return (\n        <div className=\"container\">\n          <form\n            onSubmit={() => {\n              this.acceptName();\n            }}\n          >\n            <div className=\"row\">\n              <input\n                className=\"col s8\"\n                placeholder=\"Your Name\"\n                value={enteredName}\n                onChange={e => {\n                  this.setState({\n                    enteredName: e.target.value,\n                  });\n                }}\n              />\n              <button className=\"btn\">Register</button>\n            </div>\n          </form>\n        </div>\n      );\n    }\n\n    const { messages } = this.props;\n    return (\n      <ul className=\"pages\">\n        <li className=\"chat page\">\n          <div className=\"chatArea\">\n            <ul className=\"messages\">\n              {messages.map((data, i) => {\n                return (\n                  <li className=\"collection-item\" key={i}>\n                    {data.handle} -- {data.msg}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          <form onSubmit={this.sendForm}>\n            <input\n              value={msg}\n              onChange={e => this.setState({ msg: e.target.value })}\n              className=\"inputMessage\"\n              placeholder=\"Type here...\"\n            />\n            <input type=\"submit\" hidden />\n          </form>\n        </li>\n        {/* <li className=\"login page\">\n          <div className=\"form\">\n            <h3 className=\"title\">What's your nickname?</h3>\n            <input className=\"usernameInput\" type=\"text\" maxlength=\"14\" />\n          </div>\n        </li> */}\n      </ul>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    status: state.status,\n    health: state.health,\n    messages: state.socket.messages,\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { checkHealth, sendMessage }\n)(Main);\n","import axios from 'axios';\n\nexport const HEALTH_CHECK = 'HEALTH_CHECK';\nexport const SERVER_HELLO = 'server/hello';\n\nconst API_URL = '/chat/api';\n\nexport const checkHealth = () => async dispatch => {\n  const serverResponse = await axios.get(API_URL);\n  dispatch({\n    type: HEALTH_CHECK,\n    payload: serverResponse.data,\n  });\n};\n\nexport const sendMessage = (handle, msg) => {\n  return {\n    type: SERVER_HELLO,\n    data: { handle, msg },\n  };\n};\n","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Main from './Main';\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <Route path=\"/\" component={Main} />\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import update from 'immutability-helper';\n\nconst initialState = {\n  messages: [{handle: 'Bill', msg:'Hello world!'}],\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case 'message':\n      return update(state, {\n        messages: { $push: [action.data] },\n      });\n    default:\n      return state;\n  }\n};\n","import status from './statusReducer';\nimport health from './healthReducer';\nimport socket from './socket';\n\nconst reducers = {\n  status,\n  health,\n  socket,\n};\n\nexport default reducers;\n","export default (state='OK', action) => {\n  switch (action.type) {\n    default:\n      return state\n  }\n}\n","import { HEALTH_CHECK } from '../actions';\n\nexport default (state={}, action) => {\n  switch (action.type) {\n    case HEALTH_CHECK:\n      return action.payload\n    default:\n      return state\n  }\n}\n","import { createStore, applyMiddleware } from 'redux';\nimport reduxThunk from 'redux-thunk';\nimport { combineReducers } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSocketIoMiddleware from 'redux-socket.io';\nimport io from 'socket.io-client';\nimport reducers from './reducers';\n\nconst socketUrl = process.env.REACT_APP_SOCKET_URL;\n\nlet socket = io(socketUrl);\nlet socketIoMiddleware = createSocketIoMiddleware(socket, 'server/');\n\nconst store = createStore(\n  combineReducers({ ...reducers }),\n  composeWithDevTools(applyMiddleware(socketIoMiddleware, reduxThunk))\n);\n\nstore.subscribe(() => {\n  console.log('new client state', store.getState());\n});\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './styles/index.scss';\nimport App from './components/App';\n\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}